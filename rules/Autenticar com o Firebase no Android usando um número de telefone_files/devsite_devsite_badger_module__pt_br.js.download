(function(_ds){var window=this;'use strict';var RK=function(){_ds.yr.call(this);this.h=new _ds.So(this.config)},SK=function(a){var b=a.Xa;a=_ds.V;var c=b[0].imageUrl,d=b[0].url,e=b[0].servePath,g=b[0].Fe,k=b[0].ah,l=b[0].Cg,m=b[0].shareTitle,p=b[0].shareDescription;b=(0,_ds.V)('<div class="devsite-badger-award"><div class="devsite-badger-award-inner"><devsite-badge-awarded badge-name="'+_ds.Z(b[0].title)+'" badge-icon-url="'+_ds.Z(_ds.Sq(c))+'" badge-url="'+_ds.Z(_ds.Sq(d))+'"'+(e?' badge-path="'+_ds.Z(e)+'"':"")+(m?' badge-share-title="'+
_ds.Z(m)+'"':"")+(p?' badge-share-description="'+_ds.Z(p)+'"':"")+(g?' next-playlist-url="'+_ds.Z(_ds.Sq(g))+'"':"")+(k?" redeem-another":"")+(l?" hide-buttons":"")+" dismiss></devsite-badge-awarded></div></div>");return a(b)},UK=function(){var a=_ds.Nt.call(this,["devsite-badge-awarded"])||this;a.eventHandler=new _ds.Xj(a);a.h=new _ds.gs;a.Aa=null;a.Xa=[];a.j=new _ds.Uj(function(){return void TK(a)},250);return a},VK=function(a){null===a||void 0===a?void 0:a.setAttribute("show","")},WK=function(a){return _ds.R(a,
function c(){var d=this;return _ds.C(c,function(e){if(1==e.h){if(!d.Aa)return e.return();d.h.remove("temp_badge");d.Aa.removeAttribute("show");return _ds.v(e,_ds.Ti(200),2)}if(3!=e.h)return _ds.dh(d.Aa),d.Aa=null,_ds.v(e,_ds.Ti(250),3);d.j.qa();_ds.w(e)})})},TK=function(a){return _ds.R(a,function c(){var d=this,e,g,k,l;return _ds.C(c,function(m){switch(m.h){case 1:e=d;if(d.Aa||0===d.Xa.length||"error"===document.body.getAttribute("type")||XK.exec(document.location.pathname))return m.return();_ds.y(m,
2);return _ds.v(m,window.customElements.whenDefined("devsite-badge-awarded"),4);case 4:_ds.z(m,3);break;case 2:_ds.B(m);case 3:g=d.Xa.splice(0,1);k=_ds.fr(SK,{Xa:g});if(!k)return m.return();d.eventHandler.listen(k,"click",function(p){(p=p.target)&&p.matches("button.dismiss")&&WK(e)});d.Aa=k;(l=k.querySelector("devsite-badge-awarded"))?(_ds.bk(d.eventHandler,l,"running",function(){VK(e.Aa)}),document.body.appendChild(d.Aa)):(document.body.appendChild(d.Aa),VK(d.Aa));_ds.w(m)}})})},YK=function(a){a.eventHandler.listen(document.body,
"devsite-before-page-change",function(){return void WK(a)});a.eventHandler.listen(document.body,"devsite-award-granted",function(b){(b=b.$)&&b.detail&&(a.Xa.push(b.detail.award),a.j.qa())});a.eventHandler.listen(document.body,["devsite-page-loaded","devsite-page-changed"],function(){a.Hc();a:if(_ds.Zl(a.h)){var b=a.h.get("temp_badge");if(b){var c=null;try{c=JSON.parse(b)}catch(e){a.h.remove("temp_badge");break a}if(c)if(3>c.displayCount){a.h.set("temp_badge",JSON.stringify(c));b=new URL(c.url,document.location.origin);
var d=_ds.Ai();b.origin===d.origin&&b.pathname===d.pathname&&(a.Xa.push(c),a.j.qa())}else a.h.remove("temp_badge")}}})};_ds.t(RK,_ds.yr);_ds.f=RK.prototype;_ds.f.Ob=function(){return this.h.Ob()};
_ds.f.Dc=function(a){a=void 0===a?!1:a;return _ds.R(this,function c(){var d=this,e,g,k,l;return _ds.C(c,function(m){switch(m.h){case 1:return _ds.v(m,_ds.Ar(d),2);case 2:return e=_ds.Hr(d,"getWalletId",a),g=_ds.Ir(d,e),g||(g=d.h.Dc(a),_ds.Kr(d,e,g)),k=null,_ds.y(m,3,4),_ds.v(m,g,6);case 6:k=m.j;case 4:_ds.Da(m);_ds.Jr(d,e);_ds.Fa(m,5);break;case 3:throw l=_ds.B(m),l;case 5:return m.return(k)}})})};_ds.f.ld=function(){return this.h.ld()};
_ds.f.Hc=function(){return _ds.R(this,function b(){var c=this,d,e,g;return _ds.C(b,function(k){switch(k.h){case 1:return _ds.v(k,_ds.Ar(c),2);case 2:return d=_ds.Hr(c,"syncWallet"),e=_ds.Ir(c,d),e||(e=c.h.Hc(),_ds.Kr(c,d,e)),_ds.y(k,3,4),_ds.v(k,e,4);case 4:_ds.Da(k);_ds.Jr(c,d);_ds.Fa(k,0);break;case 3:throw g=_ds.B(k),g;}})})};_ds.f.bd=function(){this.h.bd()};var XK=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/;_ds.t(UK,_ds.Nt);UK.prototype.connectedCallback=function(){YK(this)};UK.prototype.disconnectedCallback=function(){_ds.dk(this.eventHandler);WK(this)};
UK.prototype.Hc=function(){return _ds.R(this,function b(){var c,d,e,g,k;return _ds.C(b,function(l){switch(l.h){case 1:return _ds.v(l,DevsiteApp.whenReady(),2);case 2:return _ds.v(l,window.customElements.whenDefined("devsite-user"),3);case 3:c=document.querySelector("devsite-user#devsite-user");if(!c)return l.return();d=!1;_ds.y(l,4);return _ds.v(l,c.isSignedIn(),6);case 6:d=l.j;_ds.z(l,5);break;case 4:_ds.B(l);case 5:if(!d)return l.return();e=new RK;g=e.Ob();if(!g)return l.return();k=new _ds.Or;_ds.y(l,
7);return _ds.v(l,k.ua(),9);case 9:_ds.z(l,0);break;case 7:_ds.B(l),_ds.w(l)}})})};try{window.customElements.define("devsite-badger",UK)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteBadger",a)};})(_ds_www);
